import{_ as s,c as a,o as e,a as n}from"./app.4beb082a.js";const u=JSON.parse('{"title":"GResource","description":"","frontmatter":{},"headers":[{"level":2,"title":"data/dev.geopjr.tinystats.gresource.xml","slug":"data-dev-geopjr-tinystats-gresource-xml"},{"level":2,"title":"Code","slug":"code"},{"level":3,"title":"src/modules/prerequisites.cr","slug":"src-modules-prerequisites-cr"},{"level":3,"title":"src/tiny-stats.cr","slug":"src-tiny-stats-cr"},{"level":3,"title":"src/modules/views/main.cr","slug":"src-modules-views-main-cr"}],"relativePath":"en/first-app/gresource.md","lastUpdated":1657016119000}'),o={name:"en/first-app/gresource.md"},l=n(`<h1 id="gresource" tabindex="-1">GResource <a class="header-anchor" href="#gresource" aria-hidden="true">#</a></h1><p>Following the <a href="./../concepts/gresource.html">GResource</a> section, we&#39;ll make use of GResource to quickly bundle our assets in the app:</p><h2 id="data-dev-geopjr-tinystats-gresource-xml" tabindex="-1"><code>data/dev.geopjr.tinystats.gresource.xml</code> <a class="header-anchor" href="#data-dev-geopjr-tinystats-gresource-xml" aria-hidden="true">#</a></h2><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#F07178;">xml</span><span style="color:#C792EA;"> version</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">?&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">gresources</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">gresource</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">prefix</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/dev/geopjr/tinystats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">file</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">compressed</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">css/style.css</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">file</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">compressed</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">preprocess</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xml-stripblanks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">icons/dev.geopjr.tinystats.svg</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">file</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">compressed</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">preprocess</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xml-stripblanks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">ui/app.ui</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">gresource</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">gresources</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="code" tabindex="-1">Code <a class="header-anchor" href="#code" aria-hidden="true">#</a></h2><h3 id="src-modules-prerequisites-cr" tabindex="-1"><code>src/modules/prerequisites.cr</code> <a class="header-anchor" href="#src-modules-prerequisites-cr" aria-hidden="true">#</a></h3><p>We no longer need the <code>UI</code> and <code>CSS</code> global variables, so we can go ahead and comment them out (or remove them) while loading the gresource:</p><div class="language-crystal"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># UI         = {{read_file(&quot;./data/ui/app.ui&quot;)}}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># CSS_STRING = {{read_file(&quot;./data/css/style.css&quot;)}}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Gio</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">register_resource</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">data/dev.geopjr.tinystats.gresource.xml</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">data</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="src-tiny-stats-cr" tabindex="-1"><code>src/tiny-stats.cr</code> <a class="header-anchor" href="#src-tiny-stats-cr" aria-hidden="true">#</a></h3><p>We can now load the ui file from the resource:</p><div class="language-crystal"><span class="copy"></span><pre><code><span class="line"><span style="color:#FFCB6B;">B_UI</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Gtk</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Builder</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">new_from_resource</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/dev/geopjr/tinystats/ui/app.ui</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="src-modules-views-main-cr" tabindex="-1"><code>src/modules/views/main.cr</code> <a class="header-anchor" href="#src-modules-views-main-cr" aria-hidden="true">#</a></h3><p>We can load our CSS from the GResource too:</p><div class="language-crystal"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">startup</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">app </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Gtk</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Application</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">CSS</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">load_from_resource</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/dev/geopjr/tinystats/css/style.css</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span></code></pre></div>`,14),p=[l];function t(r,c,F,D,y,i){return e(),a("div",null,p)}var C=s(o,[["render",t]]);export{u as __pageData,C as default};
