import{_ as s,c as a,o as n,a as o}from"./app.4beb082a.js";var l="/assets/en/translations-0.png";const A=JSON.parse('{"title":"Translations","description":"","frontmatter":{},"headers":[{"level":2,"title":"po/POTFILES","slug":"po-potfiles"},{"level":2,"title":"po/LINGUAS","slug":"po-linguas"},{"level":2,"title":"Generating the translation files","slug":"generating-the-translation-files"},{"level":2,"title":"Code","slug":"code"},{"level":3,"title":"src/modules/prerequisites.cr","slug":"src-modules-prerequisites-cr"},{"level":3,"title":"src/modules/functions/about_action.cr","slug":"src-modules-functions-about-action-cr"}],"relativePath":"en/first-app/translations.md","lastUpdated":1657016119000}'),e={name:"en/first-app/translations.md"},p=o(`<h1 id="translations" tabindex="-1">Translations <a class="header-anchor" href="#translations" aria-hidden="true">#</a></h1><p>Let&#39;s follow the <a href="./../extra/gettext.html">Gettext</a> section:</p><h2 id="po-potfiles" tabindex="-1"><code>po/POTFILES</code> <a class="header-anchor" href="#po-potfiles" aria-hidden="true">#</a></h2><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">data/dev.geopjr.tinystats.desktop.in</span></span>
<span class="line"><span style="color:#A6ACCD;">data/dev.geopjr.tinystats.metainfo.xml.in</span></span>
<span class="line"><span style="color:#A6ACCD;">data/ui/app.ui</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="po-linguas" tabindex="-1"><code>po/LINGUAS</code> <a class="header-anchor" href="#po-linguas" aria-hidden="true">#</a></h2><p>I can only do Greek at the moment, so that&#39;s what I&#39;m going to add.</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">el</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="generating-the-translation-files" tabindex="-1">Generating the translation files <a class="header-anchor" href="#generating-the-translation-files" aria-hidden="true">#</a></h2><p>Let&#39;s run <code>xgettext</code> to gather all translatable strings:</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ xgettext --files-from=po/POTFILES --output=po/dev.geopjr.tinystats.pot</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Now let&#39;s generate the Greek file:</p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ msginit -i po/dev.geopjr.tinystats.pot -o po/el.po -l el_GR.utf8</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>I&#39;ll go ahead and fill in <code>po/el.po</code>.</p><p><code>.mo</code> binaries will be generated during install.</p><h2 id="code" tabindex="-1">Code <a class="header-anchor" href="#code" aria-hidden="true">#</a></h2><p>Following the <a href="./../extra/gettext.html">Gettext</a> section, we are going to add <code>gettext</code> to our requires and add <code>setlocale</code> &amp; <code>textdomain</code> to our <code>prerequisites.cr</code></p><div class="language-crystal"><span class="copy"></span><pre><code><span class="line"><span style="color:#F78C6C;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gettext</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><div class="language-crystal"><span class="copy"></span><pre><code><span class="line"><span style="color:#FFCB6B;">Gettext</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setlocale</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Gettext</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">LC</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">ALL</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">Gettext</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">bindtextdomain</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dev.geopjr.tinystats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{{</span><span style="color:#82AAFF;">env</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">TINY_LOCALE_LOCATION</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;">.nil?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/usr/share/locale</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">env</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">TINY_LOCALE_LOCATION</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)}})</span></span>
<span class="line"><span style="color:#FFCB6B;">Gettext</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">textdomain</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dev.geopjr.tinystats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>Thankfully, most of the strings that need translation are in the UI file which gets translated automatically, but we still need to translate the title:</p><div class="language-crystal"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">title </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Tiny Stats - </span><span style="color:#89DDFF;">#{</span><span style="color:#FFCB6B;">Gettext</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">gettext</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">NOTEBOOK</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">tab_label_text</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">).</span><span style="color:#A6ACCD;">not_nil!</span><span style="color:#89DDFF;">)}</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>Lastly, we will place the <a href="./../extra/credits.html"><code>thank_translators.cr</code></a> script in <code>data/scripts/</code> and add them in the translators section of the About dialog:</p><h3 id="src-modules-prerequisites-cr" tabindex="-1">src/modules/prerequisites.cr <a class="header-anchor" href="#src-modules-prerequisites-cr" aria-hidden="true">#</a></h3><div class="language-crystal"><span class="copy"></span><pre><code><span class="line"><span style="color:#FFCB6B;">THANKS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{{</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">../../data/scripts/thank_translators</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#A6ACCD;">stringify</span><span style="color:#89DDFF;">}}</span></span>
<span class="line"></span></code></pre></div><h3 id="src-modules-functions-about-action-cr" tabindex="-1">src/modules/functions/about_action.cr <a class="header-anchor" href="#src-modules-functions-about-action-cr" aria-hidden="true">#</a></h3><div class="language-crystal"><span class="copy"></span><pre><code><span class="line"><span style="color:#FFCB6B;">Gtk</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">show_about_dialog</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">APP</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">active_window</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">name:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">About Tiny Stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">application:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">APP</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">program_name:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Tiny Stats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">version:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">VERSION</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">logo_icon_name:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dev.geopjr.tinystats</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">copyright:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\xA9 2021 Evangelos Paterakis</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">website:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://github.com/GeopJr/tiny-stats-template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">authors:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Evangelos </span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">GeopJr</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;"> Paterakis</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">artists:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Evangelos </span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;">GeopJr</span><span style="color:#A6ACCD;">\\&quot;</span><span style="color:#C3E88D;"> Paterakis</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">translator_credits:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">THANKS</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ++</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p><img src="`+l+'" alt="Our app in Greek"></p>',26),t=[p];function r(c,D,i,F,y,d){return n(),a("div",null,t)}var u=s(e,[["render",r]]);export{A as __pageData,u as default};
